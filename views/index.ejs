<!-- <!DOCTYPE html>
<html>
<head>
    <title>To-Do List</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>To-Do List</h1>
        <a href="/new" class="btn">+ Thêm công việc</a>
        <a href="/logout" class="btn logout">Đăng xuất</a>
        <ul>
            <% tasks.forEach(task => { %>
                <li class="task-item">
                    <form action="/tasks/<%= task._id %>?_method=PUT" method="POST">
                        <input type="checkbox" name="completed" onchange="this.form.submit()" <%= task.completed ? "checked" : "" %>>
                        <div class="task-info">
                            <strong><%= task.title %></strong>
                            <p class="description"><%= task.description %></p>
                        </div>
                    </form>
                    <form action="/tasks/<%= task._id %>?_method=DELETE" method="POST">
                        <button class="delete-btn" type="submit">Xóa</button>
                    </form>
                </li>
            <% }) %>
        </ul>
    </div>
</body>
</html> -->



<!DOCTYPE html>
<html lang="vi">
<head>
    <title>Quản lý Công việc</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center">
            <h1>Quản lý Công việc</h1>
            <div>
                <a href="/logout" class="btn btn-danger">Đăng xuất</a>
            </div>
        </div>

        <a href="/new" class="btn btn-primary" style="margin-bottom: 25px">
            + Thêm công việc mới
        </a>

        <div class="task-list">
            <% if (tasks.length === 0) { %>
                <p>Chưa có công việc nào được thêm vào!</p>
            <% } else { %>
                <ul>
                    <% tasks.forEach(task => { %>
                        <li class="task-item">
                            <div class="checkbox-group">
                                <form action="/tasks/<%= task._id %>?_method=PUT" method="POST">
                                    <input type="checkbox" 
                                           name="completed" 
                                           onchange="this.form.submit()" 
                                           <%= task.completed ? "checked" : "" %>>
                                </form>
                            </div>
                            
                            <div class="task-info">
                                <div class="task-title <%= task.completed ? 'completed' : '' %>">
                                    <%= task.title %>
                                </div>
                                <% if (task.description) { %>
                                    <div class="task-description">
                                        <%= task.description %>
                                    </div>
                                <% } %>
                            </div>

                            <div style="display: flex; gap: 10px">
                                <!-- views/todo-list.html -->
                                <a href="/tasks/<%= task._id %>" class="btn btn-secondary">
                                    <i class="fas fa-edit"></i> Sửa
                                </a>
                                <form action="/tasks/<%= task._id %>?_method=DELETE" method="POST">
                                    <button type="submit" class="btn btn-danger">Xóa</button>
                                </form>
                            </div>
                        </li>
                    <% }) %>
                </ul>
            <% } %>
        </div>
    </div>
</body>
</html>
